<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Camagru Gallery</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="styles/main.css" />
</head>
<body>
  <div id="app-navbar"></div>
  <main id="app-container" class="container py-4"></main>
  <div id="app-footer"></div>
  <div id="image-modal" class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center bg-dark bg-opacity-75 d-none" style="z-index: 1050;">
    <div class="modal-content bg-white rounded shadow" style="max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;"></div>
  </div>
  <div id="loading-cover"></div>

  <script type="module">
    import { initLayout } from './js/layout.js';
    import { loadNextGalleryPage } from './js/gallery.js';

    const main = document.getElementById('app-container');
    const grid = document.createElement('div');

    initLayout(async () => {
      grid.className = 'row g-3';
      main.appendChild(grid);
    });

    const more = document.createElement('div');
    more.className = 'text-center mt-4';

    const button = document.createElement('button');
    button.className = 'btn btn-outline-primary';
    button.textContent = 'Load More';
    button.onclick = () => loadNextGalleryPage(grid, { fromButton: true });

    more.appendChild(button);
    main.appendChild(more)

    await loadNextGalleryPage(grid);

    // infinite scroll hook
    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 300) {
        loadNextGalleryPage(grid);
      }
    });
  </script>
</body>

</html>
